<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <%- include('../common/headerlink') -%>
        <title> Dashboard </title>
</head>

<body>
    <%- include('../common/dashboardnavbar') -%>
        <div class="main-con">
            <%- include('../common/dashboard-sidebar') -%>

                <div class="main-body">
                    <div class="col-10 py-5 m-auto">
                        <table class="table table-bordered table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Email</th>
                                    <th>username</th>
                                    <th>user role</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% allUser.forEach((e , i)=> {%>
                                    <tr>
                                        <th class="align-middle">
                                            <%= i+1 %>
                                        </th>
                                        <th class="align-middle">
                                            <%= e.email %>
                                        </th>
                                        <th class="align-middle">
                                            <%= e.username %>
                                        </th>
                                        <th class="align-middle">
                                            <%= e.role %>
                                        </th>
                                        <th class="text-center align-middle">
                                            <a href="/dashboard/alluser/delete/<%= e._id %>" class="text-danger mx-2"><i class="fas fa-trash fa-lg mx-1"></i></a>
                                            <a href="/dashboard/alluser/update/<%= e._id %>" class="text-success mx-2"><i class="fas fa-edit fa-lg mx-1"></i></a>
                                            <button type="button"
                                                onclick="userData('<%= e.email %>','<%= e.first_name %>','<%= e.last_name %>','<%= e.mobile %>','<%= e.username %>','<%= e.gender %>','<%= e.role %>')"
                                                class="btn btn-primary mx-2" data-bs-toggle="modal"
                                                data-bs-target="#exampleModal">
                                                Details
                                            </button>
                                        </th>
                                    </tr>
                                    <% }) %>
                            </tbody>
                        </table>
                    </div>
                </div>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Modal title
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <table class="table table-bordered table-striped table-hover">
                            <tbody>
                                <tr>
                                    <th>Firts Name</th>
                                    <th><span id="fname"></span></th>
                                </tr>
                                <tr>
                                    <th>Last Name</th>
                                    <th><span id="lname"></span></th>
                                </tr>
                                <tr>
                                    <th>Email</th>
                                    <th><span id="email"></span></th>
                                </tr>
                                <tr>
                                    <th>mobile</th>
                                    <th><span id="mobile"></span></th>
                                </tr>
                                <tr>
                                    <th>username</th>
                                    <th><span id="username"></span></th>
                                </tr>
                                <tr>
                                    <th>gender</th>
                                    <th><span id="gender"></span></th>
                                </tr>
                                <tr>
                                    <th>role</th>
                                    <th><span id="role"></span></th>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>


        <%- include('../common/footerlink') -%>
            <script>
                function userData(email, fname, lname, mobile, username, gender, role) {
                    document.querySelector('#fname').innerHTML = fname
                    document.querySelector('#lname').innerHTML = lname
                    document.querySelector('#email').innerHTML = email
                    document.querySelector('#mobile').innerHTML = mobile
                    document.querySelector('#username').innerHTML = username
                    document.querySelector('#gender').innerHTML = gender
                    document.querySelector('#role').innerHTML = role
                } 
            </script>
</body>

</html>